digraph G {
    fontname = "Bitstream Vera Sans"
    fontsize = 8

    node [
        fontname = "Bitstream Vera Sans"
        fontsize = 8
        shape = "record"
    ]

    edge [
        fontname = "Bitstream Vera Sans"
        fontsize = 8
    ]

    MainThread [
        label = "{MainThread|- server : WebSocketServer\l|}"
    ]

    WorkerThread [
        label = "{WorkerThread|- connection: Serialization\l- state : ClientState\l|}"
    ]

    ClientState [
        label = "{\<\<enumeration\>\>\nClientState|+ CONNECTED\l+ SCORE_RECEIVED\l+ HIGHSCORE_SENT\l}"
    ]

    WebSocketServer [
        label = "{WebSocketServer||+ getConnection(): WebSocket\l}"
    ]

    WebSocket [
        label = "{WebSocket|- eventHandler : std::optional\<std::function\<void(EventType, std::optional\<std::string\>)\>\>|+ connect(uint16_t port)\l+ registerHandler(handler: std::function\<void(EventType, std::optional\<std::string\>)\>)\l}"
    ]

    EventType [
        label = "{\<\<enumeration\>\> EventType|+ CONNECTED\l+ RECEIVED\l+ DISCONNECTED\l}"
    ]

    Serialization [
        label = "{Serialization|- socket : WebSocket\l|}" 
    ]

    LibWebSockets [
        label = "{\<\<external\>\>\nlibwebsockets}"
    ]

    json [
        label = "{\<\<external\>\>\nnlohmann::json}"
    ]
    
    WorkerThread -> MainThread [
        arrowhead = "diamond"

        taillabel = "0..*"
        headlabel = "1"
    ]
    WebSocketServer -> MainThread [
        arrowhead = "diamond"

        taillabel = "1"
        headlabel = "1"
    ]
    ClientState -> WorkerThread [
        arrowhead = "diamond"

        taillabel = "1"
        headlabel = "1"
    ]
    WebSocket -> Serialization [
        arrowhead = "diamond"

        taillabel = "1"
        headlabel = "1"
    ]
    EventType -> WebSocket[
        arrowhead = "diamond"

        taillabel = "1"
        headlabel = "1"
    ]
    Serialization -> WorkerThread [
        arrowhead = "diamond"

        taillabel = "1"
        headlabel = "1"
    ]
    WebSocket -> LibWebSockets [
        arrowhead = "onormal"
        style = "dashed"
    ]
    WebSocketServer -> LibWebSockets [
        arrowhead = "onormal"
        style = "dashed"
    ]
    Serialization -> json [
        arrowhead = "onormal"
        style = "dashed"
    ]
}    
